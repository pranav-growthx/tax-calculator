<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Income Tax Regime Comparison</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <style>
      body {
        background-color: #f8f9fa;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 20px 0;
      }

      .card {
        border: 1px solid #777;
        border-radius: 10px;
        box-shadow: 0 0 10px #777;
        width: 700px;
        padding: 20px;
      }

      input,
      button {
        margin-top: 10px;
      }

      .result {
        margin-top: 15px;
        font-weight: bold;
      }

      .regime-comparison {
        display: flex;
        justify-content: space-between;
      }

      .regime-column {
        width: 48%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
    <script>
      function calculateOldRegimeTax(income) {
        // Old Regime Tax Calculation
        const basicExemption = 50000;
        let taxableIncome = income - basicExemption;

        // If income is less than or equal to basic exemption, no tax
        if (taxableIncome <= 0) {
          return 0;
        }

        let tax = 0;

        // Slab 1: 2.5L-5L @ 5%
        if (taxableIncome > 250000) {
          const slab1 = Math.min(taxableIncome, 500000) - 250000;
          tax += slab1 * 0.05;
        }

        // Slab 3: 5L-10L @ 20%
        if (taxableIncome > 500000) {
          const slab3 = Math.min(taxableIncome, 1000000) - 500000;
          tax += slab3 * 0.2;
        }

        // Slab 4: Above 10L @ 30%
        if (taxableIncome > 1000000) {
          const slab4 = taxableIncome - 1000000;
          tax += slab4 * 0.3;
        }

        // Add 4% cess
        tax *= 1.04;

        return tax;
      }

      function calculateOldRegimeTaxDeductions() {
        const deductions = {
          "80c": document.getElementById("80c").value,
          "80ccd1b": document.getElementById("80ccd1b").value,
          "80eea": document.getElementById("80eea").value,
          "80e": document.getElementById("80e").value,
          "80eeb": document.getElementById("80eeb").value,
          "80d": document.getElementById("80d").value,
        };

        return Object.entries(deductions).reduce(
          (acc, curr) => acc + curr[1],
          0
        );
      }

      function calculateNewRegimeTax(income) {
        // New Regime Tax Calculation
        const basicExemption = 75000;
        const taxableIncome = income - basicExemption;
        const maxRebate = 1200000;
        // If income is less than or equal to basic exemption, no tax
        if (taxableIncome <= maxRebate) {
          return 0;
        }

        let tax = 0;

        // Slab 1: 4-8 lakh @ 5%
        if (taxableIncome > 400000) {
          const slab1 = Math.min(taxableIncome, 800000) - 400000;
          tax += slab1 * 0.05;
        }

        // Slab 2: 8-12 lakh @ 10%
        if (taxableIncome > 800000) {
          const slab2 = Math.min(taxableIncome, 1200000) - 800000;
          tax += slab2 * 0.1;
        }

        // Slab 3: 12-16 lakh @ 15%
        if (taxableIncome > 1200000) {
          const slab3 = Math.min(taxableIncome, 1600000) - 1200000;
          tax += slab3 * 0.15;
        }

        // Slab 4: 16-20 lakh @ 20%
        if (taxableIncome > 1600000) {
          const slab4 = Math.min(taxableIncome, 2000000) - 1600000;
          tax += slab4 * 0.2;
        }

        // Slab 5: 20-24 lakh @ 25%
        if (taxableIncome > 2000000) {
          const slab5 = Math.min(taxableIncome, 2400000) - 2000000;
          tax += slab5 * 0.25;
        }

        // Slab 6: Above 24 lakh @ 30%
        if (taxableIncome > 2400000) {
          const slab6 = taxableIncome - 2400000;
          tax += slab6 * 0.3;
        }

        tax *= 1.04; // Add 4% cess

        return tax;
      }

      function calculateTax() {
        // Get income from input
        const income = parseFloat(document.getElementById("incomeInput").value);

        const oldTaxRegimeDeductions = calculateOldRegimeTaxDeductions();
        // Calculate taxes for both regimes
        const oldRegimeTax = calculateOldRegimeTax(
          income - oldTaxRegimeDeductions
        );
        const newRegimeTax = calculateNewRegimeTax(income);

        // Display result
        const resultElement = document.getElementById("result");
        resultElement.innerHTML = `
          <div class="regime-comparison">
            <div class="regime-column">
              <h4>Old Tax Regime</h4>
              <p>Gross Income: ₹${income.toLocaleString()}</p>
              <p>Basic Exemption: ₹50,000</p>
              <p>Taxable Income: ₹${Math.max(
                income - 50000 - oldTaxRegimeDeductions,
                0
              ).toLocaleString()}</p>
              <p>Total Tax Payable: ₹${Math.round(
                oldRegimeTax
              ).toLocaleString()}</p>
            </div>
            <div class="regime-column">
              <h4>New Tax Regime</h4>
              <p>Gross Income: ₹${income.toLocaleString()}</p>
              <p>Basic Exemption: ₹75,000</p>
              <p>Taxable Income: ₹${Math.max(
                income - 75000,
                0
              ).toLocaleString()}</p>
              <p>Total Tax Payable: ₹${Math.round(
                newRegimeTax
              ).toLocaleString()}</p>
            </div>
          </div>
          <div class="text-center mt-3">
            <p class="fw-bold">
              ${
                oldRegimeTax < newRegimeTax
                  ? "Old Regime is More Beneficial"
                  : "New Regime is More Beneficial"
              }
            </p>
          </div>
        `;
      }
    </script>
    <div class="card">
      <div class="card-title text-center mb-4">
        <h3>Income Tax Regime Comparison (India)</h3>
      </div>
      <input
        id="incomeInput"
        class="form-control mb-3"
        type="number"
        placeholder="Enter your annual income"
        min="0"
      />
      <button
        type="button"
        class="btn btn-secondary"
        data-bs-toggle="modal"
        data-bs-target="#deductionModal"
      >
        Add Deductions
      </button>
      <div
        class="modal fade"
        id="deductionModal"
        tabindex="-1"
        aria-labelledby="deductionModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="deductionModalLabel">
                Add Deductions
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <div class="mb-3">
                <label for="deductionAmount" class="form-label"
                  >Deduction Amount</label
                >
                <input
                  id="80c"
                  type="number"
                  class="form-control"
                  aria-describedby="deductionAmountHelp"
                  placeholder="Section 80C, LIC, ELSS, NPS"
                />
                <input
                  id="80ccd1b"
                  type="number"
                  class="form-control"
                  aria-describedby="deductionAmountHelp"
                  placeholder="Section 80CCD1B, NPS"
                />
                <input
                  id="80e"
                  type="number"
                  class="form-control"
                  aria-describedby="deductionAmountHelp"
                  placeholder="Section 80E, Interest on Education Loan"
                />
                <input
                  id="80eea"
                  type="number"
                  class="form-control"
                  aria-describedby="deductionAmountHelp"
                  placeholder="Section 80EEA, Interest on Home Loan"
                />
                <input
                  id="80eeb"
                  type="number"
                  class="form-control"
                  aria-describedby="deductionAmountHelp"
                  placeholder="Section 80EEB, Interest on Electric Vehicle Loan"
                />
                <input
                  id="80d"
                  type="number"
                  class="form-control"
                  aria-describedby="deductionAmountHelp"
                  placeholder="Section 80D, Medical Insurance"
                />
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Close
              </button>
              <button type="button" class="btn btn-primary">
                Add Deduction
              </button>
            </div>
          </div>
        </div>
      </div>

      <button class="btn btn-primary" onclick="calculateTax()">
        Compare Tax Regimes
      </button>
      <div id="result" class="result"></div>
    </div>
  </body>
</html>
